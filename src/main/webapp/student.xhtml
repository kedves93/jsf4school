<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<ui:composition template="/templates/page-template.xhtml">

    <ui:param name="pageTitle" value="JSF 4 School"/>
    
    <ui:define name="panel-top">
    	<div class="container">
    		<h2>Top Surveys</h2>
    	</div>
    </ui:define>
    
    <ui:define name="panel-main">
        <div class="container">
	  	  <div class="table-responsive">
		     <table class="surveys-table">
		     	<tr class="surveys-table-header">
				    <th>Id</th>
				    <th>Name</th> 
				    <th>Description</th>
				    <th>Status</th>
				</tr>
		   		<ui:repeat value="#{topSurveys.surveys}" var="survey">
					<tr class="surveys-table-row" id="#{survey.id}">
						<td class="surveys-table-col">#{survey.id}</td>
						<td class="surveys-table-col">#{survey.name}</td>
						<td class="surveys-table-col">#{survey.description}</td>
						<td class="surveys-table-col">
							<ui:fragment rendered="#{survey.isCompleted == true}">
				                <span class="glyphicon glyphicon-ok text-success"></span>
				            </ui:fragment>
				            <ui:fragment rendered="#{survey.isCompleted == false}">
				                <span class="glyphicon glyphicon-remove text-danger"></span>
				            </ui:fragment>
						</td>
					</tr>
					<tr class="surveys-table-detail-row toggle-survey-details" id="toggle_#{survey.id}">
						<td colspan="4" class="surveys-table-detail-col">
							#{survey.id}
							<ui:repeat value="#{survey.questions}" var="question">
								#{question.text}
							</ui:repeat>
						</td>
					</tr>
		   		</ui:repeat>
		  	 </table>
	       </div>
		</div>
    </ui:define>
    
</ui:composition>
</html>